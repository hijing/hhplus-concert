### 유저 대기열 토큰 기능
```mermaid
sequenceDiagram
actor User
User ->> Client: 서비스 접속 요청
Client ->> Queue: 대기열 참여 요청
Queue ->> Queue: 대기 순서 할당
Queue -->> Client: 대기 번호 반환
Client -->> User: 대기 상태 표시

loop 대기 상태 확인
Client ->> Queue: 대기 상태 확인 요청
Queue -->> Client: 대기 상태 응답
Client -->> User: 대기 상태 업데이트
end

Queue ->> Queue: 사용자 차례 도달
Queue ->> Auth: 토큰 발급 요청
Auth ->> Auth: 토큰 생성
Auth -->> Queue: 토큰 반환
Queue -->> Client: 접속 토큰 전달
Client -->> User: 서비스 접속 허용
```

### 예약 가능 날짜 / 좌석 API
```mermaid
sequenceDiagram
사용자 ->> 클라이언트 앱: 좌석 목록 요청
클라이언트 앱 ->> 예약 서버: 좌석 목록 요청 (토큰 포함)
예약 서버 ->> 인증 서버: 토큰 유효성 검증
인증 서버 ->> 인증 서버: 토큰 검증
인증 서버 -->> 예약 서버 : 토큰 검증 응답
예약 서버 ->> 데이터베이스: 좌석 정보 조회
예약 서버 ->> 클라이언트 앱: 좌석 목록 반환
클라이언트 앱 ->> 사용자: 좌석 목록 표시

사용자 ->> 클라이언트 앱: 좌석 선택 및 예약 요청
클라이언트 앱 ->> 예약 서버: 예약 요청 (토큰 포함)
예약 서버 ->> 인증 서버: 토큰 유효성 검증
예약 서버 ->> 데이터베이스: 좌석 가용성 확인
예약 서버 ->> 데이터베이스: 예약 정보 저장
예약 서버 ->> 클라이언트 앱: 예약 성공 응답
클라이언트 앱 ->> 사용자: 예약 확인 메시지 표시

사용자 ->> 클라이언트 앱: 예약 확인 요청
클라이언트 앱 ->> 예약 서버: 예약 정보 요청 (토큰 포함)
예약 서버 ->> 인증 서버: 토큰 유효성 검증
예약 서버 ->> 데이터베이스: 예약 정보 조회
예약 서버 ->> 클라이언트 앱: 예약 정보 반환
클라이언트 앱 ->> 사용자: 예약 상세 정보 표시
```

### 예약 가능 날짜 / 좌석 API
```mermaid
sequenceDiagram
    사용자 ->> 토큰 컨트롤러 : API 요청
    토큰 컨트롤러 ->> 토큰 서비스 : 토큰 검증 요청
    토큰 서비스 ->> 토큰 서비스 : 토큰 검증
    토큰 서비스 ->> 토큰 컨트롤러 : 토큰 검증 응답
    토큰 컨트롤러 ->> 예약 좌석 : 예약 가능 날짜 / 좌석 요청
    예약 좌석 ->> DB : 예약 가능 날짜 / 좌석 요청
    DB ->> DB : 좌석 조회
    DB ->> 예약 좌석 : 예약 가능 날짜 / 좌석 요청
    예약 좌석 ->> 사용자 : API 응답
```

### 좌석 예약 요청 API
```mermaid
sequenceDiagram
    사용자 ->> 토큰 컨트롤러 : API 요청
    토큰 컨트롤러 ->> 토큰 서비스 : 토큰 검증 요청
    토큰 서비스 ->> 토큰 서비스 : 토큰 검증
    토큰 서비스 ->> 토큰 컨트롤러 : 토큰 검증 응답
    토큰 컨트롤러 ->> 좌석 예약  : 좌석 예약 요청
    좌석 예약 ->> DB : 좌석 예약 요청
    DB ->> DB  : 좌석 예약
    DB ->> 좌석 예약  : 좌석 예약 응답
    좌석 예약 ->> 사용자 : API 응답
```

### 잔액 충전 / 조회 API
```mermaid
sequenceDiagram
    사용자 ->> 토큰 컨트롤러 : API 요청
    토큰 컨트롤러 ->> 토큰 서비스 : 토큰 검증 요청
    토큰 서비스 ->> 토큰 서비스 : 토큰 검증
    토큰 서비스 ->> 토큰 컨트롤러 : 토큰 검증 응답
    토큰 컨트롤러 ->> 잔액 정보 : 잔액 충전 / 조회 요청
    잔액 정보 ->> DB : 잔액 충전 / 조회 요청
    DB ->> DB : 잔액 충전 / 조회
    DB ->> 잔액 정보 : 잔액 충전 / 조회 응답
    잔액 정보 ->> 사용자 : API 응답
```

### 결제 API
```mermaid
sequenceDiagram
    사용자 ->> 토큰 컨트롤러 : API 요청
    토큰 컨트롤러 ->> 토큰 서비스 : 토큰 검증 요청
    토큰 서비스 ->> 토큰 서비스 : 토큰 검증
    토큰 서비스 ->> 토큰 컨트롤러 : 토큰 검증 응답
    토큰 컨트롤러 ->> 결제 : 결제 요청
    결제 ->> 좌석 : 유효한 좌석 체크
    좌석 ->> 결제 : 유효한 좌석
    결제 ->> 잔액 : 잔액 차감
    잔액 ->> DB : 잔액 검증 요청
    DB ->> DB : 잔액 검증
    DB ->> 잔액 : 잔액 검증 응답
    잔액 ->> 결제 : 결제 성공
    결제 ->> 좌석 : 결제 완료 (좌석배정)
    좌석 ->> 결제 : 좌성 배정
    결제 ->> 사용자 : API 응답
```